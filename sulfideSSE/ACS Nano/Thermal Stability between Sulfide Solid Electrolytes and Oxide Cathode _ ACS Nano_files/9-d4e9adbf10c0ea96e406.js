(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{282:function(e,t,s){"use strict";s.r(t),s.d(t,"AccessManagementConrolsElements",(function(){return a})),s.d(t,"AccessManagementConrolsSelectors",(function(){return l})),s.d(t,"AccessManagementConrolsClassList",(function(){return c})),s.d(t,"AccessManagementConrolsTexts",(function(){return r}));var n,o=s(1),i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),__decorate=function(e,t,s,n){var o,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(i<3?o(r):i>3?o(t,s,r):o(t,s))||r);return i>3&&r&&Object.defineProperty(t,s,r),r},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof s?e:new s((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))},__generator=function(e,t){var s,n,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(c){return function step(i){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,n=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],n=0}finally{s=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},r=function(e){function Texts(){var t=null!==e&&e.apply(this,arguments)||this;return t.accessProvidedBy="Your access to this publication has been provided by ",t.noAccessProviderMessage="We can't locate your access provider currently, please try later",t.tooltipPadding=20,t.tooltipOriginalWidth=260,t.tooltipWidthPercentage=.75,t}return i(Texts,e),Texts}(o.d),c=function(e){function ClassList(){var t=null!==e&&e.apply(this,arguments)||this;return t.tooltipParents=".access__control--item",t.loaderImageClass="access__control__loader",t.accessTooltip=".access__control--hover",t.providerParagraph=".access__control--tooltip",t.accessProviderLink=".link--bold",t.accessProvider=".access-provider",t.jsHiddenClasses="js--hidden",t}return i(ClassList,e),ClassList}(o.d),l=function(e){function Selectors(){var t=null!==e&&e.apply(this,arguments)||this;return t.tooltipParents=".access__control--item",t.accessProviders=".access__control--item .access-provider",t.infocusSlider=".infocus-carousels_slider",t.infocusSliderOwlOwter=".owl-stage-outer",t}return i(Selectors,e),Selectors}(o.f),a=function(e){function Elements(){var t=null!==e&&e.apply(this,arguments)||this;return t.tooltipParents=[],t.accessProviders=[],t}return i(Elements,e),Elements}(o.b),u=function(){function AccessManagementConrols(e){this.wrapper=e}return AccessManagementConrols.prototype.initialize=function(){this.elements.initialize(this.wrapper),this.setElements(),this.addEventListeners()},AccessManagementConrols.prototype.setElements=function(){this.elements.tooltipParents=this.domUtils.getElements(this.selectors.tooltipParents),this.elements.accessProviders=this.domUtils.getElements(this.selectors.accessProviders),this.elements.isInfocusSlider=this.domUtils.getElement(this.selectors.infocusSlider)},AccessManagementConrols.prototype.addEventListeners=function(){var e=this;this.elements.accessProviders.forEach((function(t){e.domUtils.closest(e.classList.tooltipParents,t).addEventListener("mouseover",e.checkAccessProvider.bind(e),{once:!0})})),this.elements.isInfocusSlider&&(this.texts.tooltipPadding=2,screen.orientation.addEventListener("change",this.updateInfocusRect.bind(this))),(window.matchMedia("(max-width: "+UX.grid.screenSm+"px)").matches||this.elements.isInfocusSlider)&&this.domUtils.addEventListener(this.elements.tooltipParents,"mouseover",(function(t){return[e.checkTooltipPosition(t,e.classList.tooltipParents,e.classList.accessTooltip)]}))},AccessManagementConrols.prototype.updateInfocusRect=function(e){var t;this.elements.infocusSliderOwlOwter=this.domUtils.closest(this.selectors.infocusSliderOwlOwter,e),this.infocusSliderRect=null===(t=this.elements.infocusSliderOwlOwter)||void 0===t?void 0:t.getBoundingClientRect()},AccessManagementConrols.prototype.checkTooltipPosition=function(e,t,s){var n,o=e.target,i=this.domUtils.closest(t,o),r=i&&this.domUtils.getElement(s,i);if(this.updateInfocusRect(i),r){var c=r.getBoundingClientRect(),l=i.getBoundingClientRect(),a=this.infocusSliderRect?l.x-this.infocusSliderRect.x:l.x,u=(null===(n=this.infocusSliderRect)||void 0===n?void 0:n.width)||window.innerWidth,d=a+(c.width||(this.texts.tooltipOriginalWidth>this.texts.tooltipWidthPercentage*u?this.texts.tooltipWidthPercentage*u:this.texts.tooltipOriginalWidth))+this.texts.tooltipPadding-u;r.style.left=d>0?"-"+d+"px":"0"}},AccessManagementConrols.prototype.checkAccessProvider=function(e){return __awaiter(this,void 0,void 0,(function(){var t,s,n,o,i,r,c;return __generator(this,(function(l){switch(l.label){case 0:return t=e.target,s=this.domUtils.closest(this.classList.tooltipParents,t),n=s&&this.domUtils.getElement(this.classList.accessProvider,s),o=n&&this.domUtils.closest(this.classList.providerParagraph,n),i=o&&this.domUtils.getElement(this.classList.accessProviderLink,o),r=this.getDoiName(o),n&&r?(o.textContent="",[4,this.getAccessProvider(r)]):[2];case 1:return""===(c=l.sent())||(this.domUtils.removeClasses(s,this.classList.jsHiddenClasses),o.innerHTML=this.texts.accessProvidedBy+c,o.appendChild(i)),[2]}}))}))},AccessManagementConrols.prototype.getAccessProvider=function(e){return __awaiter(this,void 0,void 0,(function(){var t,s;return __generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch("/pb/widgets/accessServices/getAccessProvider?doi="+e,{cache:"no-cache"})];case 1:if(!(t=n.sent()).ok)throw new Error(this.texts.noAccessProviderMessage);return[4,t.json()];case 2:return[2,n.sent().name];case 3:return s=n.sent(),console.error(s.message),[2,""];case 4:return[2]}}))}))},AccessManagementConrols.prototype.getDoiName=function(e){var t;if(e){var s,n=this.domUtils.closest(this.classList.accessTooltip,e);return(null==n?void 0:n.id)&&(s=(s=null===(t=n.id)||void 0===t?void 0:t.replace("tooltip-sc-","")).replace("tooltip-ta-","")),e.dataset.doi&&(s=e.dataset.doi),s}},AccessManagementConrols=__decorate([Object(o.c)(l,a,c,r),__metadata("design:paramtypes",[HTMLElement])],AccessManagementConrols)}();t.default=u}}]);
//# sourceMappingURL=9-d4e9adbf10c0ea96e406.js.map