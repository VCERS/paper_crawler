(window.webpackJsonp=window.webpackJsonp||[]).push([[33,4],{228:function(t,e,n){"use strict";n.r(e),n.d(e,"events",(function(){return L})),n.d(e,"default",(function(){return F}));var r=n(1),o=n.n(r),i=n(15),a=n.n(i),s=n(11),c=n.n(s),l=n(3),u=n.n(l),h=n(4),p=n.n(h),d=n(7),f=n.n(d),v=n(5),y=n.n(v),w=n(16),m=n.n(w),g=n(8),E=n.n(g),_=n(9);function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,n){return t[e]=n}}function wrap(t,e,n,r){var o=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(o.prototype),s=new Context(r||[]);return i(a,"_invoke",{value:makeInvokeMethod(t,n,s)}),a}function tryCatch(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var u="suspendedStart",h="executing",p="completed",d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var f={};define(f,s,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(values([])));y&&y!==n&&r.call(y,s)&&(f=y);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(f);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(n,i,a,s){var c=tryCatch(t[n],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==o()(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){invoke("next",t,a,s)}),(function(t){invoke("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return invoke("throw",t,a,s)}))}s(c.arg)}var n;i(this,"_invoke",{value:function value(t,r){function callInvokeWithMethodAndArg(){return new e((function(e,n){invoke(t,r,e,n)}))}return n=n?n.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,n,r){var o=u;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=maybeInvokeDelegate(s,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===u)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=tryCatch(e,n,r);if("normal"===l.type){if(o=r.done?p:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=p,r.method="throw",r.arg=l.arg)}}}function maybeInvokeDelegate(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,maybeInvokeDelegate(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=tryCatch(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function next(){for(;++i<e.length;)if(r.call(e,i))return next.value=e[i],next.done=!1,next;return next.value=t,next.done=!0,next};return a.next=a}}throw new TypeError(o()(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,i(w,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),i(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(w),define(w,l,"Generator"),define(w,s,(function(){return this})),define(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function next(){for(;n.length;){var t=n.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var n=this;function handle(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),d}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;resetTryEntry(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,n,r){return this.delegate={iterator:values(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}function _callSuper(t,e,n){return e=y()(e),f()(t,function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function _isNativeReflectConstruct(){return!!t}()}()?Reflect.construct(e,n||[],y()(t).constructor):e.apply(t,n))}var L={dataFetch:"UX:data-fetch"},F=function(t){function ShowRecommended(t){var e;return u()(this,ShowRecommended),(e=_callSuper(this,ShowRecommended)).wrapper=t,e.initialize(e.wrapper),e}return E()(ShowRecommended,t),p()(ShowRecommended,[{key:"selectors",get:function get(){return{lazyLoad:"lazy-load",delayLoad:"delayLoad"}}},{key:"classList",get:function get(){return{base:"show-recommended",delayLoad:"delayLoad",delayedLoad:"delayedLoad"}}},{key:"removeShowRecommendedIfNoData",get:function get(){return!0}},{key:"ajaxUrl",get:function get(){return this.wrapper.dataset.ajaxurl}},{key:"initialize",value:function initialize(t){var e=this;!function _superPropGet(t,e,n,r){var o=m()(y()(1&r?t.prototype:t),e,n);return 2&r?function(t){return o.apply(n,t)}:o}(ShowRecommended,"initialize",this,3)([]),window.isShowRecommendedFetched=!1,this.fetchContent().then((function(){e.afterAjax()}))}},{key:"fetchContent",value:(e=c()(_regeneratorRuntime().mark((function _callee(){var t,e;return _regeneratorRuntime().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(this.ajaxUrl);case 3:if(200===(t=n.sent).status){n.next=6;break}throw new Error("Failed to load content");case 6:return n.next=8,t.text();case 8:e=n.sent,this.wrapper.innerHTML=e,n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.debug(n.t0);case 15:case"end":return n.stop()}}),_callee,this,[[0,12]])}))),function fetchContent(){return e.apply(this,arguments)})},{key:"afterAjax",value:function afterAjax(){var t=this;setTimeout((function(){t.hideSkeletons(),t.emitFetchedEvent()}),10)}},{key:"emitFetchedEvent",value:function emitFetchedEvent(){var t=new Event(L.dataFetch);window.dispatchEvent(t),window.isShowRecommendedFetched=!0}},{key:"hideSkeletons",value:function hideSkeletons(){var t,e,n,r,o=this;(null===(t=this.wrapper.querySelectorAll(this._selectors.lazyLoad))||void 0===t||t.forEach((function(t){return t.parentNode.removeChild(t)})),null===(e=this.wrapper.querySelectorAll(this._selectors.delayLoad))||void 0===e||e.forEach((function(t){return t.classList.remove(o._classList.delayLoad).add(o._classList.delayedLoad)})),this.removeShowRecommendedIfNoData)?this.wrapper.children[0]&&this.wrapper.children[0].children[0]?(n=this.wrapper).replaceWith.apply(n,a()(this.wrapper.children)):this.wrapper.parentNode.classList.contains(this._classList.base)&&this.wrapper.parentNode.remove():(r=this.wrapper).replaceWith.apply(r,a()(this.wrapper.children))}}]);var e}(_.a)},733:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return _}));var r=n(14),o=n.n(r),i=n(3),a=n.n(i),s=n(4),c=n.n(s),l=n(7),u=n.n(l),h=n(5),p=n.n(h),d=n(16),f=n.n(d),v=n(8),y=n.n(v),w=n(9),m=n(228);function _callSuper(t,e,n){return e=p()(e),u()(t,function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function _isNativeReflectConstruct(){return!!t}()}()?Reflect.construct(e,n||[],p()(t).constructor):e.apply(t,n))}function _superPropGet(t,e,n,r){var o=f()(p()(1&r?t.prototype:t),e,n);return 2&r?function(t){return o.apply(n,t)}:o}var g=function(t){function PopNotification(t){var e;return a()(this,PopNotification),(e=_callSuper(this,PopNotification))._constants=e.constants,e.wrapper=t,e.popupFloatAfter=e.wrapper.classList.contains(e._classList.popupFloatAfter),e._visibility=e.visibility,e._visibility&&e._visibility.indexOf("%")>-1&&(e._visibility=parseFloat(e._visibility)/100),e.initialize(),e.checkVisibility(),e.addEventListeners(),e}return y()(PopNotification,t),c()(PopNotification,[{key:"constants",get:function get(){return{TIMER:200,FOOTER_OFFSET:200,TRANSITION:250,FLOAT_EL_OFFSET:200}}},{key:"visibility",get:function get(){return this.wrapper.dataset.visibleAfter}},{key:"selectors",get:function get(){return{closeBtn:".pop-notification__close",footer:".footer"}}},{key:"elements",get:function get(){return{closeBtn:[],popupFloatAfterPlaceholder:null}}},{key:"classList",get:function get(){return{show:"show",relatedContent:"related-content",popupFloatAfter:"pop-after-passed",popupFloatAfterPassed:"js-sticky",popupFloatAfterPlaceholder:"js-intersection-placeholder",transitioned:"js-transitioned"}}},{key:"initialize",value:function initialize(){_superPropGet(PopNotification,"initialize",this,3)([]),this.setControlElements(),this.popupFloatAfter&&(this.setPopupFloatAfterPlaceholder(),this.checkElPassedScroll())}},{key:"addEventListeners",value:function addEventListeners(){_superPropGet(PopNotification,"addEventListeners",this,3)([]),this.visibility&&(this.checkVisibilityEvent=this.checkVisibility.bind(this),window.addEventListener("scroll",this.checkVisibilityEvent)),this.popupFloatAfter&&(this.checkElPassedScrollEvent=this.checkElPassedScroll.bind(this),window.addEventListener("scroll",this.checkElPassedScrollEvent)),window.addEventListener(m.events.dataFetch,this.setControlElements.bind(this))}},{key:"setControlElements",value:function setControlElements(){var t=this;this._elements.closeBtn=this.wrapper.querySelectorAll(this._selectors.closeBtn),this._elements.closeBtn.forEach((function(e){e.addEventListener("click",t.onClick.bind(t))}))}},{key:"setPopupFloatAfterPlaceholder",value:function setPopupFloatAfterPlaceholder(){var t=document.createElement("div");t.classList.add(this._classList.popupFloatAfterPlaceholder),this.popupFloatAfterDummyId="pop-after-passed-placeholder-".concat(Math.floor(1e4*Math.random())),t.setAttribute("id",this.popupFloatAfterDummyId),this.wrapper.insertAdjacentElement("afterend",t),this._elements.popupFloatAfterPlaceholder=document.getElementById(this.popupFloatAfterDummyId)}},{key:"onClick",value:function onClick(t){var e=this;if(t.preventDefault(),this.wrapper.classList.remove("show"),this.popupFloatAfter)return window.removeEventListener("scroll",this.checkVisibilityEvent),window.removeEventListener("scroll",this.checkElPassedScrollEvent),this.wrapper.classList.remove(this._classList.popupFloatAfterPassed),void this.wrapper.classList.remove(this._classList.transitioned);setTimeout((function(){e.wrapper.remove()}),this._constants.TIMER)}},{key:"setVisibility",value:function setVisibility(t){t?this.wrapper.classList.add(this._classList.show):this.wrapper.classList.remove(this._classList.show)}},{key:"setFloat",value:function setFloat(t){var e=this;t?(this.wrapper.classList.add(this._classList.popupFloatAfterPassed),this.settimeout=setTimeout((function(){return e.wrapper.classList.add(e._classList.transitioned)}),this._constants.TRANSITION)):(this.wrapper.classList.remove(this._classList.popupFloatAfterPassed),this.wrapper.classList.remove(this._classList.transitioned))}},{key:"checkVisibility",value:function checkVisibility(){var t,e=document.body.getBoundingClientRect().height*this._visibility,n=window.pageYOffset,r=null===(t=document.querySelector(this._selectors.footer))||void 0===t?void 0:t.getBoundingClientRect(),o=(null==r?void 0:r.height)-(null==r?void 0:r.top)+this._constants.FOOTER_OFFSET||-1;this.setVisibility(n>e&&o<0)}},{key:"checkElPassedScroll",value:function checkElPassedScroll(){var t=window.scrollY,e=this._elements.popupFloatAfterPlaceholder.offsetTop+this._elements.popupFloatAfterPlaceholder.offsetHeight+this._constants.FLOAT_EL_OFFSET;this.setFloat(t>e)}}])}(w.a),E=n(10);function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pop_notification_callSuper(t,e,n){return e=p()(e),u()(t,function pop_notification_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function _isNativeReflectConstruct(){return!!t}()}()?Reflect.construct(e,n||[],p()(t).constructor):e.apply(t,n))}function pop_notification_superPropGet(t,e,n,r){var o=f()(p()(1&r?t.prototype:t),e,n);return 2&r?function(t){return o.apply(n,t)}:o}var _=function(t){function AAASPopNotification(){return a()(this,AAASPopNotification),pop_notification_callSuper(this,AAASPopNotification,arguments)}return y()(AAASPopNotification,t),c()(AAASPopNotification,[{key:"originalNonFloatHeight",get:function get(){return document.querySelector(this._selectors.nonFloatEl)?document.querySelector(this._selectors.nonFloatEl).clientHeight:this._constants.FLOAT_EL_OFFSET}},{key:"hasRelatedContent",get:function get(){return this.wrapper.querySelector(".".concat(this.classList.relatedContent))}},{key:"footerDist",get:function get(){var t,e=null===(t=document.querySelector(this._selectors.footer))||void 0===t?void 0:t.getBoundingClientRect();return(null==e?void 0:e.height)-(null==e?void 0:e.top)+this._constants.FOOTER_OFFSET||-1}},{key:"selectors",get:function get(){return _objectSpread(_objectSpread({},pop_notification_superPropGet(AAASPopNotification,"selectors",this,1)),{},{nonFloatEl:".".concat(this.classList.relatedContent,":not(.").concat(this.classList.popupFloatAfterPassed,")")})}},{key:"visibility",get:function get(){var t;return(null===(t=this.wrapper.parentNode.dataset)||void 0===t?void 0:t.visibleAfter)||this.wrapper.dataset.visibleAfter}},{key:"constants",get:function get(){return _objectSpread(_objectSpread({},pop_notification_superPropGet(AAASPopNotification,"constants",this,1)),{},{FLOAT_EL_OFFSET:400})}},{key:"initialize",value:function initialize(){this.setControlElements(),this.popupFloatAfter&&this.setPopupFloatAfterPlaceholder()}},{key:"addEventListeners",value:function addEventListeners(){var t=this,e=this.visibility;this.checkElPassedScrollEvent=this.checkElPassedScroll.bind(this),this.checkVisibilityEvent=this.checkVisibility.bind(this),e&&window.addEventListener("scroll",this.checkVisibilityEvent),this.popupFloatAfter&&window.innerWidth>=E.a.xl&&(this.checkElPassedScroll(),window.addEventListener("scroll",this.checkElPassedScrollEvent)),window.addEventListener("resize",(function(){window.innerWidth<E.a.xl?(t.setFloat(!1),t.setVisibility(!0),window.removeEventListener("scroll",t.checkElPassedScrollEvent),window.removeEventListener("scroll",t.checkVisibilityEvent)):(window.addEventListener("scroll",t.checkElPassedScrollEvent,{passive:!0}),window.addEventListener("scroll",t.checkVisibilityEvent))})),window.addEventListener(m.events.dataFetch,this.setControlElements.bind(this))}},{key:"setPopupFloatAfterPlaceholder",value:function setPopupFloatAfterPlaceholder(){var t=document.createElement("div");t.classList.add(this._classList.popupFloatAfterPlaceholder),this.popupFloatAfterDummyId="pop-after-passed-placeholder-".concat(Math.floor(1e4*Math.random())),t.setAttribute("id",this.popupFloatAfterDummyId),this.wrapper.insertAdjacentElement("beforebegin",t),this._elements.popupFloatAfterPlaceholder=document.getElementById(this.popupFloatAfterDummyId)}},{key:"checkVisibility",value:function checkVisibility(){var t=document.body.getBoundingClientRect().height*this._visibility,e=window.scrollY,n=this.footerDist;if(this.popupFloatAfter){var r=this._elements.popupFloatAfterPlaceholder.getBoundingClientRect().top;this.setVisibility(e>t&&r+this._constants.FLOAT_EL_OFFSET+this.originalNonFloatHeight<0&&n<0)}else this.setVisibility(e>t&&n<0)}},{key:"setFloat",value:function setFloat(t){var e=this;t?(this.hasRelatedContent&&(this._elements.popupFloatAfterPlaceholder.style.paddingBottom="".concat(this.originalNonFloatHeight,"px")),this.wrapper.classList.add(this._classList.popupFloatAfterPassed),this.settimeout=setTimeout((function(){return e.wrapper.classList.add(e._classList.transitioned)}),this._constants.TRANSITION)):(this.hasRelatedContent&&(this._elements.popupFloatAfterPlaceholder.style.paddingBottom=""),this.wrapper.classList.remove(this._classList.popupFloatAfterPassed),this.wrapper.classList.remove(this._classList.transitioned))}},{key:"checkElPassedScroll",value:function checkElPassedScroll(){var t=window.scrollY+(this.wrapper.querySelector(this._selectors.nonFloatEl)?0:document.documentElement.clientHeight),e=this._elements.popupFloatAfterPlaceholder.getBoundingClientRect().top+window.scrollY+this.originalNonFloatHeight;this.setFloat(t>e)}}])}(g)}}]);
//# sourceMappingURL=popNotification-1bd967dc2f5878d51ec4.js.map