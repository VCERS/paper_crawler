(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{436:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return g}));var i=o(3),r=o.n(i),n=o(4),s=o.n(n),p=o(7),l=o.n(p),a=o(5),v=o.n(a),u=o(16),c=o.n(u),m=o(8),h=o.n(m),d=o(9),_=o(17);function _callSuper(e,t,o){return t=v()(t),l()(e,function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function _isNativeReflectConstruct(){return!!e}()}()?Reflect.construct(t,o||[],v()(e).constructor):t.apply(e,o))}function _superPropGet(e,t,o,i){var r=c()(v()(1&i?e.prototype:e),t,o);return 2&i?function(e){return r.apply(o,e)}:r}var g=function(e){function CoverImage(e){var t,o;return r()(this,CoverImage),(o=_callSuper(this,CoverImage)).isPopupOpened=!1,o.COVER_TRANSITION_DURATION=450,o.wrapper=e,o.isViewable=null===(t=o.wrapper.querySelector(o._selectors.coverImageWrapper))||void 0===t?void 0:t.dataset.isViewable,o.isViewable&&o.initializePopup(),o}return h()(CoverImage,e),s()(CoverImage,[{key:"selectors",get:function get(){return{btnViewCover:".cover-image__view-cover",coverImageWrapper:".cover-image__image",coverImage:".cover-image__image img",popupView:".cover-image__popup-view",popupCover:".cover-image__popup-view__cover img",movingCover:".cover-image__popup-moving-cover",hoverOverlay:".cover-image__image__hover-overlay",closePopup:".cover-image__popup-view__close-popup button",coverImageCaptionWrapper:".cover-image__popup-view__caption-wrapper"}}},{key:"elements",get:function get(){return{btnViewCover:null,popupView:null,popupCover:null,movingCover:null,coverImageWrapper:null,coverImage:null,hoverOverlay:null,closePopup:null,coverImageCaptionWrapper:null}}},{key:"classList",get:function get(){return{visible:"visible"}}},{key:"initializePopup",value:function initializePopup(){var e;(_superPropGet(CoverImage,"initialize",this,3)([]),this._elements={btnViewCover:this.wrapper.querySelector(this._selectors.btnViewCover),popupView:this.wrapper.querySelector(this._selectors.popupView),popupCover:this.wrapper.querySelector(this._selectors.popupCover),movingCover:this.wrapper.querySelector(this._selectors.movingCover),coverImageWrapper:this.wrapper.querySelector(this._selectors.coverImageWrapper),coverImage:this.wrapper.querySelector(this._selectors.coverImage),hoverOverlay:this.wrapper.querySelector(this._selectors.hoverOverlay),closePopup:this.wrapper.querySelector(this._selectors.closePopup),coverImageCaptionWrapper:this.wrapper.querySelector(this._selectors.coverImageCaptionWrapper)},this._elements.movingCover)&&(this.coverSrc=null===(e=this._elements.movingCover.dataset)||void 0===e?void 0:e.coverSrc,this._elements.movingCover.style.backgroundImage="url('".concat(this.coverSrc,"')"));this.addEventListeners()}},{key:"addEventListeners",value:function addEventListeners(){var e,t,o,i,r,n;(_superPropGet(CoverImage,"addEventListeners",this,3)([]),this._elements.hoverOverlay)?(null===(i=this._elements.coverImageWrapper)||void 0===i||i.addEventListener("click",this.showPopup.bind(this)),null===(r=this._elements.coverImageWrapper)||void 0===r||r.addEventListener("keydown",this.handleHoverOverlayKeydown.bind(this))):null===(n=this._elements.btnViewCover)||void 0===n||n.addEventListener("click",this.showPopup.bind(this));null===(e=this._elements.popupView)||void 0===e||e.addEventListener("click",this.closePopup.bind(this)),null===(t=this._elements.closePopup)||void 0===t||t.addEventListener("click",this.closePopup.bind(this)),null===(o=this._elements.coverImageCaptionWrapper)||void 0===o||o.addEventListener("click",(function(e){return e.stopPropagation()})),document.addEventListener("keydown",this.handlePopupKeydown.bind(this))}},{key:"showPopup",value:function showPopup(e){var t,o=this;e.preventDefault(),this.isPopupOpened||(this.isPopupOpened=!0,document.body.style.overflow="hidden",this.animateCover({from:this._elements.coverImage,to:this._elements.popupCover}),this._elements.popupView.classList.add(this._classList.visible),this._elements.popupView.removeAttribute("aria-hidden"),this._elements.popupView.setAttribute("aria-modal","true"),null===(t=this._elements.btnViewCover)||void 0===t||t.setAttribute("disabled","true"),setTimeout((function(){o._elements.coverImageCaptionWrapper&&o._elements.coverImageCaptionWrapper.click()}),this.COVER_TRANSITION_DURATION))}},{key:"closePopup",value:function closePopup(e){var t,o=this;e.preventDefault(),e.stopImmediatePropagation(),this.isPopupOpened=!1,document.body.style.overflow="visible",this.animateCover({from:this._elements.popupCover,to:this._elements.coverImage}),this._elements.popupView.classList.remove(this._classList.visible),this._elements.popupView.removeAttribute("aria-modal"),this._elements.popupView.setAttribute("aria-hidden","true"),null===(t=this._elements.btnViewCover)||void 0===t||t.removeAttribute("disabled"),setTimeout((function(){var e;null===(e=o._elements.btnViewCover)||void 0===e||e.focus()}),this.COVER_TRANSITION_DURATION)}},{key:"animateCover",value:function animateCover(e){var t=this,o=e.from.getBoundingClientRect(),i=e.to.getBoundingClientRect();this._elements.movingCover.style.width=o.width+"px",this._elements.movingCover.style.height=o.height+"px",this._elements.movingCover.style.top=o.top+"px",this._elements.movingCover.style.left=o.left+"px";var r=i.left-o.left,n=i.top-o.top;this._elements.movingCover.style.transform="translate3d(".concat(r,"px, ").concat(n,"px, 0) scale(").concat(i.width/o.width,")"),setTimeout((function(){t._elements.movingCover.style.opacity="0",setTimeout((function(){t._elements.movingCover.style.opacity="1",t._elements.movingCover.style.transform="unset",t._elements.movingCover.style.width="0px",t._elements.movingCover.style.height="0px",t._elements.movingCover.style.top="0px",t._elements.movingCover.style.left="0px"}),200)}),this.COVER_TRANSITION_DURATION)}},{key:"handlePopupKeydown",value:function handlePopupKeydown(e){if(e.keyCode===_.d.ESC&&this.isPopupOpened&&this.closePopup(e),e.keyCode===_.d.TAB&&this.isPopupOpened){var t=this._elements.popupView.querySelectorAll(_.a);if((null==t?void 0:t.length)>0){var o=t[0],i=t[t.length-1];e.shiftKey?document.activeElement===o&&(null==i||i.focus(),e.preventDefault()):document.activeElement===i&&(null==o||o.focus(),e.preventDefault())}}}},{key:"handleHoverOverlayKeydown",value:function handleHoverOverlayKeydown(e){e.keyCode===_.d.RETURN&&this.showPopup(e)}}])}(d.a)}}]);
//# sourceMappingURL=coverImage-775ca4b2f6674118204c.js.map